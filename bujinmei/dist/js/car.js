"use strict";window.onload=function(){getid("boxx");var p="id="+decodeURI(location.search).split("=")[1];ajax("get","../api/details2.php",p,function(s){for(var e=JSON.parse(s),t="",i=0;i<e.length;i++)t+='\n                    <ul class="order_lists">\n                        <li class="list_chk">\n                            <input type="checkbox" id="checkbox_2" class="son_check">\n                            <label for="checkbox_2"></label>\n                        </li>\n                        <li class="list_con">\n                            <div class="list_img">\n                                <a href="javascript:;">\n                                    <img src="'+e[i].big+'">\n                                </a>\n                            </div>\n                            <div class="list_text">\n                                <a href="javascript:;">'+e[i].font+'</a>\n                            </div>\n                        </li>\n\n                        <li class="list_price">\n        <p class="price">'+e[i].current+'<i class="sc-cmTdod jFEPfJ">/ '+e[i].old+'</i></p>\n                        </li>\n                        <li class="list_amount">\n                            <div class="amount_box">\n                                <a href="javascript:;" class="reduce reSty">-</a>\n                                <input type="text" value="1" class="sum" id="sum">\n                                <a href="javascript:;" class="plus">+</a>\n                            </div>\n                        </li>\n                        <li class="list_sum">\n                            <p class="sum_price">'+e[i].current+'</p>\n                        </li>\n                        <li class="list_op">\n                            <p class="del">\n                                <a href="javascript:;" class="delBtn" id="delBtn">\n                                    <img src="../img/delete.91359608.png"> </a>\n                            </p>\n                        </li>\n                    </ul>\n                </div>\n       ';document.querySelector("#boxx").innerHTML=t,$(function(){var s=$('input[type="checkbox"]'),t=$(".whole_check"),e=$(".cartBox"),i=$(".shopChoice"),n=$(".son_check");s.click(function(){$(this).is(":checked")?$(this).next("label").addClass("mark"):$(this).next("label").removeClass("mark")}),t.click(function(){var s=e.find('input[type="checkbox"]');$(this).is(":checked")?(s.prop("checked",!0),s.next("label").addClass("mark")):(s.prop("checked",!1),s.next("label").removeClass("mark")),d()}),n.each(function(){$(this).click(function(){if($(this).is(":checked")){var s=n.length,e=0;n.each(function(){$(this).is(":checked")&&e++}),e==s&&(t.prop("checked",!0),t.next("label").addClass("mark"))}else t.prop("checked",!1),t.next("label").removeClass("mark")})}),i.each(function(){$(this).click(function(){if($(this).is(":checked")){var s=i.length,e=0;i.each(function(){$(this).is(":checked")&&e++}),e==s&&(t.prop("checked",!0),t.next("label").addClass("mark")),$(this).parents(".cartBox").find(".son_check").prop("checked",!0),$(this).parents(".cartBox").find(".son_check").next("label").addClass("mark")}else t.prop("checked",!1),t.next("label").removeClass("mark"),$(this).parents(".cartBox").find(".son_check").prop("checked",!1),$(this).parents(".cartBox").find(".son_check").next("label").removeClass("mark");d()})}),e.each(function(){var t=$(this).find(".son_check");t.each(function(){$(this).click(function(){if($(this).is(":checked")){var s=t.length,e=0;t.each(function(){$(this).is(":checked")&&e++}),e==s&&($(this).parents(".cartBox").find(".shopChoice").prop("checked",!0),$(this).parents(".cartBox").find(".shopChoice").next("label").addClass("mark"))}else $(this).parents(".cartBox").find(".shopChoice").prop("checked",!1),$(this).parents(".cartBox").find(".shopChoice").next("label").removeClass("mark");d()})})});var a=$(".plus"),c=$(".reduce"),l=$(".sum");a.click(function(){var s=$(this).prev("input"),e=parseInt(s.val())+1,t=$(this).parents(".amount_box").find(".reduce"),i=$(this).parents(".order_lists").find(".sum_price"),n=$(this).parents(".order_lists").find(".price").html(),a=e*parseInt(n.substring(1));s.val(e),i.html("￥"+a),1<s.val()&&t.hasClass("reSty")&&t.removeClass("reSty"),d()}),c.click(function(){var s=$(this).next("input"),e=parseInt(s.val())-1,t=$(this).parents(".order_lists").find(".sum_price"),i=$(this).parents(".order_lists").find(".price").html(),n=e*parseInt(i.substring(1));1<s.val()&&(s.val(e),t.html("￥"+n)),1!=s.val()||$(this).hasClass("reSty")||$(this).addClass("reSty"),d()}),l.keyup(function(){var s,e,t=$(this).parents(".order_lists").find(".sum_price"),i=$(this).parents(".order_lists").find(".price").html();""==$(this).val()&&$(this).val("1"),$(this).val($(this).val().replace(/\D|^0/g,"")),e=(s=$(this).val())*parseInt(i.substring(1)),$(this).attr("value",s),t.html("￥"+e),d()});var r=null,o="";function h(){$(".model_bg").fadeOut(300),$(".my_model").fadeOut(300)}function d(){var t=0,i=0,s=$(".calBtn a");n.each(function(){if($(this).is(":checked")){var s=parseInt($(this).parents(".order_lists").find(".sum_price").html().substring(1)),e=parseInt($(this).parents(".order_lists").find(".sum").val());t+=s,i+=e}}),$(".total_text").html("￥"+t),$(".piece_num").html(i),0!=t&&0!=i?s.hasClass("btn_sty")||s.addClass("btn_sty"):s.hasClass("btn_sty")&&s.removeClass("btn_sty")}$(".delBtn").click(function(){r=$(this).parents(".order_lists"),o=r.parents(".order_content"),$(".model_bg").fadeIn(300),$(".my_model").fadeIn(300);console.log(p),ajax("post","../api/cart2.php",p,function(){})}),$(".closeModel").click(function(){h()}),$(".dialog-close").click(function(){h()}),$(".dialog-sure").click(function(){r.remove(),null!=o.html().trim()&&0!=o.html().trim().length||o.parents(".cartBox").remove(),h(),n=$(".son_check"),d()})})})};